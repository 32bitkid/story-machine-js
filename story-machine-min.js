(function(){var a=(Function.prototype.bind,Function.prototype.call),b=a.bind(Array.prototype.slice),c=function(a){var c,d,e,f,g=b(arguments,1);for(c=0,d=g.length;d>c;c++){e=g[c];for(f in e)a[f]=e[f]}return a},d={target:void 0,elements:void 0,onSectionAdded:function(a){var b=document.documentElement||document.body;b.scrollTop=a.offsetTop},register:{}},e=function(b){b=c({},d,b);var e=function(c){var d,e=c.target,f=c.currentTarget;if(f.classList.contains("complete"))return void c.preventDefault();do if(e.classList.contains("answer")){d=e;break}while(null!==(e=e.parentElement));if(void 0!==d){c.preventDefault();var g=d.getAttribute("href").substr(1);if(k(g)){var h=n(g);h.classList.add("current"),h.classList.add("new");{h.offsetTop}h.classList.remove("new"),d.classList.add("selected"),f.classList.add("complete"),f.classList.remove("current");var i=b.onSectionAdded;i&&i.call==a&&i.call(void 0,h)}}},f=b.target,g={},h={},i={DIV:function(a){var b=a.getAttribute("id"),c=a.innerHTML;l(b,c)},SCRIPT:function(a){var b=a.getAttribute("id"),c=a.innerText||a.textContent,d=h[a.getAttribute("type")];d&&(c=d(c)),l(b,c)}},j=i.DIV,k=function(a){return!!g[a]},l=function(a,b){g[a]=b},m=function(a,b){h[a]=b},n=function(a){var b=g[a];if(b){var c=document.createElement("section");return c.innerHTML=b,c.addEventListener("click",e),f.appendChild(c),c}},o=function(a){var b,c,d,e;for(b=0,c=a.length;c>b;b++)d=a[b],d.parentElement.removeChild(d),(e=i[d.tagName]||j)(d)};if(b.register)for(var p in b.register)m(p,b.register[p]);return b.elements&&o(b.elements),{add:l,render:n,addElements:o,registerType:m}};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.storyMachine=e):this.storyMachine=e}).call(this);